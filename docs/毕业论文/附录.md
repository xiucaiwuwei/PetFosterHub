# 附录

## 附录A□系统使用的主要技术框架

PetFosterHub宠物寄养平台使用了多种技术框架和工具，本节将列出系统使用的主要技术框架及其版本。

### A.1□后端技术框架

| 技术框架 | 版本 | 用途 | 来源 |
|----------|------|------|------|
| Java | 17 | 编程语言 | Oracle |
| Spring Boot | 3.1.0 | 应用开发框架 | Spring |
| Spring Cloud | 2022.0.3 | 微服务框架 | Spring |
| Spring MVC | 6.0.9 | Web应用框架 | Spring |
| Spring Data JPA | 3.1.0 | 数据访问框架 | Spring |
| Spring Security | 6.1.0 | 安全框架 | Spring |
| MyBatis | 3.5.13 | ORM框架 | MyBatis |
| JWT | 0.11.5 | 认证授权 | Auth0 |
| Lombok | 1.18.26 | 代码生成工具 | Project Lombok |
| MapStruct | 1.5.5.Final | 对象映射工具 | MapStruct |
| Swagger | 3.0.0 | API文档工具 | Swagger |
| Log4j2 | 2.19.0 | 日志框架 | Apache |

### A.2□前端技术框架

| 技术框架 | 版本 | 用途 | 来源 |
|----------|------|------|------|
| Vue.js | 3.3.4 | JavaScript框架 | Vue.js |
| Vite | 4.4.0 | 构建工具 | Vite |
| TypeScript | 5.1.3 | 编程语言 | Microsoft |
| Element Plus | 2.3.6 | UI组件库 | Element Plus |
| Axios | 1.4.0 | HTTP客户端 | Axios |
| Pinia | 2.1.4 | 状态管理 | Vue.js |
| Vue Router | 4.2.2 | 路由管理 | Vue.js |
| ECharts | 5.4.3 | 数据可视化 | Apache |
| Less | 4.1.3 | CSS预处理器 | Less |
| Sass | 1.63.4 | CSS预处理器 | Sass |

### A.3□数据库与缓存

| 技术框架 | 版本 | 用途 | 来源 |
|----------|------|------|------|
| MySQL | 8.0.33 | 关系型数据库 | Oracle |
| Redis | 6.2.13 | 缓存数据库 | Redis Labs |
| Elasticsearch | 8.8.0 | 搜索引擎 | Elastic |
| RabbitMQ | 3.12.0 | 消息队列 | Pivotal |

### A.4□服务器与部署

| 技术框架 | 版本 | 用途 | 来源 |
|----------|------|------|------|
| Linux | CentOS 7.9 | 操作系统 | CentOS |
| Docker | 24.0.2 | 容器化平台 | Docker |
| Kubernetes | 1.27.2 | 容器编排工具 | Cloud Native Computing Foundation |
| Nginx | 1.24.0 | Web服务器 | Nginx |
| Tomcat | 10.1.10 | Java应用服务器 | Apache |
| Jenkins | 2.401.1 | CI/CD工具 | Jenkins |

### A.5□开发工具与测试框架

| 技术框架 | 版本 | 用途 | 来源 |
|----------|------|------|------|
| IntelliJ IDEA | 2023.1.3 | Java IDE | JetBrains |
| Visual Studio Code | 1.79.0 | 代码编辑器 | Microsoft |
| Postman | 10.16.0 | API测试工具 | Postman |
| JUnit | 5.9.3 | 单元测试框架 | JUnit |
| Mockito | 5.3.1 | 模拟测试框架 | Mockito |
| JMeter | 5.5 | 性能测试工具 | Apache |
| Selenium | 4.9.1 | UI测试工具 | Selenium |

## 附录B□数据库表结构

本节列出PetFosterHub宠物寄养平台的主要数据库表结构，包括表名、字段名、数据类型、约束和描述等。

### B.1□用户表（users）

| 字段名 | 数据类型 | 约束 | 描述 |
|--------|----------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 用户ID |
| username | VARCHAR(50) | UNIQUE, NOT NULL | 用户名 |
| password | VARCHAR(255) | NOT NULL | 密码（加密存储） |
| phone_number | VARCHAR(20) | UNIQUE | 手机号码 |
| email | VARCHAR(100) | UNIQUE | 邮箱 |
| nickname | VARCHAR(50) | | 昵称 |
| avatar_url | VARCHAR(255) | | 头像URL |
| user_type | VARCHAR(20) | NOT NULL | 用户类型（OWNER:宠物主人, FOSTER:寄养提供者, ADMIN:管理员） |
| status | VARCHAR(20) | NOT NULL | 状态（ACTIVE:活跃, INACTIVE:非活跃, LOCKED:锁定） |
| created_at | DATETIME | NOT NULL | 创建时间 |
| updated_at | DATETIME | NOT NULL | 更新时间 |
| last_login_at | DATETIME | | 最后登录时间 |
| real_name | VARCHAR(50) | | 真实姓名 |
| id_card_number | VARCHAR(50) | UNIQUE | 身份证号码 |
| address | VARCHAR(255) | | 地址 |
| latitude | DECIMAL(10,8) | | 纬度 |
| longitude | DECIMAL(11,8) | | 经度 |

### B.2□宠物表（pets）

| 字段名 | 数据类型 | 约束 | 描述 |
|--------|----------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 宠物ID |
| owner_id | BIGINT | FOREIGN KEY(users.id), NOT NULL | 宠物主人ID |
| name | VARCHAR(50) | NOT NULL | 宠物名称 |
| type | VARCHAR(50) | NOT NULL | 宠物类型（DOG:狗, CAT:猫, OTHER:其他） |
| breed | VARCHAR(100) | | 宠物品种 |
| age | INT | | 宠物年龄（单位：月） |
| gender | VARCHAR(10) | | 宠物性别（MALE:公, FEMALE:母） |
| weight | DECIMAL(5,2) | | 宠物体重（单位：kg） |
| description | TEXT | | 宠物描述 |
| health_status | VARCHAR(50) | | 健康状况 |
| vaccine_status | VARCHAR(255) | | 疫苗接种情况 |
| is_neutered | BOOLEAN | | 是否绝育 |
| is_aggressive | BOOLEAN | | 是否有攻击性 |
| created_at | DATETIME | NOT NULL | 创建时间 |
| updated_at | DATETIME | NOT NULL | 更新时间 |

### B.3□寄养服务表（foster_services）

| 字段名 | 数据类型 | 约束 | 描述 |
|--------|----------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 寄养服务ID |
| provider_id | BIGINT | FOREIGN KEY(users.id), NOT NULL | 寄养提供者ID |
| title | VARCHAR(255) | NOT NULL | 服务标题 |
| description | TEXT | NOT NULL | 服务描述 |
| price_per_day | DECIMAL(10,2) | NOT NULL | 每日价格 |
| min_stay_days | INT | | 最小寄养天数 |
| max_stay_days | INT | | 最大寄养天数 |
| available_pet_types | VARCHAR(255) | NOT NULL | 可寄养宠物类型（逗号分隔） |
| max_pets | INT | | 最大寄养数量 |
| address | VARCHAR(255) | NOT NULL | 服务地址 |
| latitude | DECIMAL(10,8) | NOT NULL | 纬度 |
| longitude | DECIMAL(11,8) | NOT NULL | 经度 |
| status | VARCHAR(20) | NOT NULL | 状态（ACTIVE:活跃, INACTIVE:非活跃, DELETED:已删除） |
| created_at | DATETIME | NOT NULL | 创建时间 |
| updated_at | DATETIME | NOT NULL | 更新时间 |
| average_rating | DECIMAL(3,2) | | 平均评分 |
| review_count | INT | | 评价数量 |

### B.4□订单表（bookings）

| 字段名 | 数据类型 | 约束 | 描述 |
|--------|----------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 订单ID |
| owner_id | BIGINT | FOREIGN KEY(users.id), NOT NULL | 宠物主人ID |
| provider_id | BIGINT | FOREIGN KEY(users.id), NOT NULL | 寄养提供者ID |
| service_id | BIGINT | FOREIGN KEY(foster_services.id), NOT NULL | 寄养服务ID |
| pet_id | BIGINT | FOREIGN KEY(pets.id), NOT NULL | 宠物ID |
| start_date | DATE | NOT NULL | 开始日期 |
| end_date | DATE | NOT NULL | 结束日期 |
| total_amount | DECIMAL(10,2) | NOT NULL | 总金额 |
| status | VARCHAR(20) | NOT NULL | 状态（PENDING:待支付, PAID:已支付, CONFIRMED:已确认, ONGOING:进行中, COMPLETED:已完成, CANCELLED:已取消, REFUNDED:已退款） |
| created_at | DATETIME | NOT NULL | 创建时间 |
| updated_at | DATETIME | NOT NULL | 更新时间 |
| payment_time | DATETIME | | 支付时间 |
| confirmation_time | DATETIME | | 确认时间 |
| completion_time | DATETIME | | 完成时间 |
| notes | TEXT | | 备注信息 |

### B.5□支付表（payments）

| 字段名 | 数据类型 | 约束 | 描述 |
|--------|----------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 支付ID |
| booking_id | BIGINT | FOREIGN KEY(bookings.id), UNIQUE, NOT NULL | 订单ID |
| amount | DECIMAL(10,2) | NOT NULL | 支付金额 |
| payment_method | VARCHAR(50) | NOT NULL | 支付方式（WECHAT:微信支付, ALIPAY:支付宝, CREDIT_CARD:信用卡） |
| transaction_id | VARCHAR(100) | UNIQUE, NOT NULL | 交易ID |
| status | VARCHAR(20) | NOT NULL | 状态（PENDING:待支付, SUCCESS:成功, FAILED:失败, REFUNDED:已退款） |
| created_at | DATETIME | NOT NULL | 创建时间 |
| updated_at | DATETIME | NOT NULL | 更新时间 |
| payment_time | DATETIME | | 支付时间 |

### B.6□评价表（reviews）

| 字段名 | 数据类型 | 约束 | 描述 |
|--------|----------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 评价ID |
| booking_id | BIGINT | FOREIGN KEY(bookings.id), UNIQUE, NOT NULL | 订单ID |
| reviewer_id | BIGINT | FOREIGN KEY(users.id), NOT NULL | 评价人ID |
| reviewee_id | BIGINT | FOREIGN KEY(users.id), NOT NULL | 被评价人ID |
| rating | INT | NOT NULL | 评分（1-5星） |
| comment | TEXT | | 评价内容 |
| created_at | DATETIME | NOT NULL | 创建时间 |
| updated_at | DATETIME | NOT NULL | 更新时间 |
| is_anonymous | BOOLEAN | | 是否匿名评价 |

### B.7□消息表（messages）

| 字段名 | 数据类型 | 约束 | 描述 |
|--------|----------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 消息ID |
| sender_id | BIGINT | FOREIGN KEY(users.id), NOT NULL | 发送者ID |
| receiver_id | BIGINT | FOREIGN KEY(users.id), NOT NULL | 接收者ID |
| booking_id | BIGINT | FOREIGN KEY(bookings.id) | 订单ID（可选，关联特定订单的消息） |
| content | TEXT | NOT NULL | 消息内容 |
| is_read | BOOLEAN | NOT NULL DEFAULT FALSE | 是否已读 |
| created_at | DATETIME | NOT NULL | 创建时间 |

### B.8□文件上传表（file_uploads）

| 字段名 | 数据类型 | 约束 | 描述 |
|--------|----------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 文件ID |
| user_id | BIGINT | FOREIGN KEY(users.id), NOT NULL | 上传用户ID |
| entity_type | VARCHAR(50) | NOT NULL | 关联实体类型（USER_AVATAR:用户头像, PET_IMAGE:宠物图片, SERVICE_IMAGE:服务图片） |
| entity_id | BIGINT | NOT NULL | 关联实体ID |
| file_name | VARCHAR(255) | NOT NULL | 文件名 |
| file_path | VARCHAR(255) | NOT NULL | 文件路径 |
| file_size | BIGINT | NOT NULL | 文件大小（字节） |
| file_type | VARCHAR(50) | NOT NULL | 文件类型（MIME类型） |
| created_at | DATETIME | NOT NULL | 上传时间 |

## 附录C□核心API接口列表

本节列出PetFosterHub宠物寄养平台的核心API接口，包括接口名称、URL、请求方法、请求参数、响应格式等。

### C.1□用户管理接口

| 接口名称 | URL | 请求方法 | 描述 |
|----------|-----|----------|------|
| 用户注册 | /api/auth/register | POST | 用户注册接口 |
| 用户登录 | /api/auth/login | POST | 用户登录接口 |
| 获取用户信息 | /api/users/me | GET | 获取当前登录用户信息 |
| 更新用户信息 | /api/users/me | PUT | 更新当前登录用户信息 |
| 修改密码 | /api/users/me/password | PUT | 修改用户密码 |
| 获取用户列表 | /api/users | GET | 获取用户列表（管理员权限） |
| 获取用户详情 | /api/users/{id} | GET | 获取指定用户详情（管理员权限） |
| 更新用户状态 | /api/users/{id}/status | PUT | 更新用户状态（管理员权限） |

### C.2□宠物管理接口

| 接口名称 | URL | 请求方法 | 描述 |
|----------|-----|----------|------|
| 创建宠物信息 | /api/pets | POST | 创建宠物信息 |
| 获取宠物列表 | /api/pets | GET | 获取当前用户的宠物列表 |
| 获取宠物详情 | /api/pets/{id} | GET | 获取指定宠物详情 |
| 更新宠物信息 | /api/pets/{id} | PUT | 更新宠物信息 |
| 删除宠物信息 | /api/pets/{id} | DELETE | 删除宠物信息 |
| 上传宠物图片 | /api/pets/{id}/images | POST | 上传宠物图片 |

### C.3□寄养服务接口

| 接口名称 | URL | 请求方法 | 描述 |
|----------|-----|----------|------|
| 创建寄养服务 | /api/foster-services | POST | 创建寄养服务 |
| 获取寄养服务列表 | /api/foster-services | GET | 获取寄养服务列表（支持搜索、筛选、分页） |
| 获取寄养服务详情 | /api/foster-services/{id} | GET | 获取指定寄养服务详情 |
| 更新寄养服务 | /api/foster-services/{id} | PUT | 更新寄养服务 |
| 删除寄养服务 | /api/foster-services/{id} | DELETE | 删除寄养服务 |
| 上传服务图片 | /api/foster-services/{id}/images | POST | 上传寄养服务图片 |
| 获取热门寄养服务 | /api/foster-services/hot | GET | 获取热门寄养服务 |
| 获取附近寄养服务 | /api/foster-services/nearby | GET | 根据地理位置获取附近寄养服务 |

### C.4□订单管理接口

| 接口名称 | URL | 请求方法 | 描述 |
|----------|-----|----------|------|
| 创建订单 | /api/bookings | POST | 创建寄养订单 |
| 获取订单列表 | /api/bookings | GET | 获取当前用户的订单列表 |
| 获取订单详情 | /api/bookings/{id} | GET | 获取指定订单详情 |
| 取消订单 | /api/bookings/{id}/cancel | PUT | 取消订单 |
| 确认订单 | /api/bookings/{id}/confirm | PUT | 确认订单（寄养提供者） |
| 完成订单 | /api/bookings/{id}/complete | PUT | 完成订单（寄养提供者） |
| 评价订单 | /api/bookings/{id}/review | POST | 评价订单 |

### C.5□支付接口

| 接口名称 | URL | 请求方法 | 描述 |
|----------|-----|----------|------|
| 创建支付 | /api/payments | POST | 创建支付 |
| 支付回调 | /api/payments/callback | POST | 支付回调接口 |
| 查询支付状态 | /api/payments/{id} | GET | 查询支付状态 |
| 申请退款 | /api/payments/{id}/refund | POST | 申请退款 |

## 附录D□系统配置文件示例

本节提供PetFosterHub宠物寄养平台的主要配置文件示例。

### D.1□application.yml配置文件示例

```yaml
server:
  port: 8080
  servlet:
    context-path: /api

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/pet_foster_hub?useSSL=false&serverTimezone=UTC
    username: root
    password: password
    driver-class-name: com.mysql.cj.jdbc.Driver
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
  redis:
    host: localhost
    port: 6379
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
  elasticsearch:
    uris: http://localhost:9200

# 安全配置
security:
  jwt:
    secret: your-secret-key
    expiration: 86400000  # 24小时

# 文件上传配置
file:
  upload-dir: uploads
  max-size: 10485760  # 10MB

# 邮件配置
mail:
  host: smtp.example.com
  port: 587
  username: your-email@example.com
  password: your-email-password
  properties:
    mail:
      smtp:
        auth: true
        starttls:
          enable: true

# 日志配置
logging:
  level:
    root: INFO
    com.petfosterhub: DEBUG
```

## 附录E□系统部署架构图说明

PetFosterHub宠物寄养平台采用微服务架构进行部署，主要包括以下组件：

1. **API网关层**：使用Spring Cloud Gateway作为API网关，负责请求路由、负载均衡、认证授权等功能。

2. **应用服务层**：包含多个微服务，如用户服务、宠物服务、寄养服务、订单服务、支付服务等，每个服务独立部署和扩展。

3. **数据存储层**：包括MySQL数据库（主从复制）、Redis缓存、Elasticsearch搜索引擎和RabbitMQ消息队列。

4. **基础设施层**：使用Docker进行容器化部署，Kubernetes进行容器编排，Jenkins进行CI/CD自动化部署。

5. **监控和日志系统**：使用Prometheus进行监控，Grafana进行可视化展示，ELK（Elasticsearch、Logstash、Kibana）进行日志管理和分析。

系统部署架构图略。

本节列出PetFosterHub宠物寄养平台的核心API接口，包括接口名称、URL、请求方法、请求参数、响应参数和描述等。

### C.1□用户管理接口

#### C.1.1□用户注册
- **接口名称**：用户注册
- **URL**：/api/v1/users/register
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "username": "string",
    "password": "string",
    "phoneNumber": "string",
    "email": "string",
    "nickname": "string",
    "userType": "OWNER/FOSTER"
  }
  ```
- **响应参数**：
  ```json
  {
    "code": "integer",
    "message": "string",
    "data": {
      "id": "long",
      "username": "string",
      "nickname": "string",
      "userType": "string",
      "status": "string",
      "createdAt": "datetime"
    }
  }
  ```
- **描述**：用户注册接口，用于新用户创建账号。

#### C.1.2□用户登录
- **接口名称**：用户登录
- **URL**：/api/v1/users/login
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "username": "string",
    "password": "string"
  }
  ```
- **响应参数**：
  ```json
  {
    "code": "integer",
    "message": "string",
    "data": {
      "id": "long",
      "username": "string",
      "nickname": "string",
      "userType": "string",
      "token": "string",
      "expireTime": "datetime"
    }
  }
  ```
- **描述**：用户登录接口，用于用户登录系统并获取访问令牌。

#### C.1.3□获取用户信息
- **接口名称**：获取用户信息
- **URL**：/api/v1/users/me
- **请求方法**：GET
- **请求参数**：无（需要携带认证令牌）
- **响应参数**：
  ```json
  {
    "code": "integer",
    "message": "string",
    "data": {
      "id": "long",
      "username": "string",
      "nickname": "string",
      "avatarUrl": "string",
      "phoneNumber": "string",
      "email": "string",
      "userType": "string",
      "status": "string",
      "realName": "string",
      "address": "string",
      "latitude": "decimal",
      "longitude": "decimal",
      "createdAt": "datetime",
      "updatedAt": "datetime"
    }
  }
  ```
- **描述**：获取当前登录用户的详细信息。

### C.2□宠物管理接口

#### C.2.1□添加宠物
- **接口名称**：添加宠物
- **URL**：/api/v1/pets
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "name": "string",
    "type": "DOG/CAT/OTHER",
    "breed": "string",
    "age": "integer",
    "gender": "MALE/FEMALE",
    "weight": "decimal",
    "description": "string",
    "healthStatus": "string",
    "vaccineStatus": "string",
    "isNeutered": "boolean",
    "isAggressive": "boolean"
  }
  ```
- **响应参数**：
  ```json
  {
    "code": "integer",
    "message": "string",
    "data": {
      "id": "long",
      "name": "string",
      "type": "string",
      "breed": "string",
      "age": "integer",
      "gender": "string",
      "ownerId": "long",
      "createdAt": "datetime",
      "updatedAt": "datetime"
    }
  }
  ```
- **描述**：添加宠物接口，用于宠物主人添加自己的宠物信息。

#### C.2.2□获取宠物列表
- **接口名称**：获取宠物列表
- **URL**：/api/v1/pets
- **请求方法**：GET
- **请求参数**：
  - ownerId：宠物主人ID（可选，默认为当前登录用户）
  - page：页码（可选，默认为1）
  - size：每页数量（可选，默认为10）
- **响应参数**：
  ```json
  {
    "code": "integer",
    "message": "string",
    "data": {
      "content": [
        {
          "id": "long",
          "name": "string",
          "type": "string",
          "breed": "string",
          "age": "integer",
          "gender": "string",
          "description": "string",
          "createdAt": "datetime",
          "updatedAt": "datetime"
        }
      ],
      "totalPages": "integer",
      "totalElements": "long",
      "size": "integer",
      "number": "integer"
    }
  }
  ```
- **描述**：获取宠物列表接口，用于获取指定宠物主人的宠物列表。

### C.3□寄养服务接口

#### C.3.1□发布寄养服务
- **接口名称**：发布寄养服务
- **URL**：/api/v1/foster-services
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "title": "string",
    "description": "string",
    "pricePerDay": "decimal",
    "minStayDays": "integer",
    "maxStayDays": "integer",
    "availablePetTypes": "string",
    "maxPets": "integer",
    "address": "string",
    "latitude": "decimal",
    "longitude": "decimal"
  }
  ```
- **响应参数**：
  ```json
  {
    "code": "integer",
    "message": "string",
    "data": {
      "id": "long",
      "title": "string",
      "description": "string",
      "pricePerDay": "decimal",
      "providerId": "long",
      "status": "string",
      "createdAt": "datetime",
      "updatedAt": "datetime"
    }
  }
  ```
- **描述**：发布寄养服务接口，用于寄养提供者发布新的寄养服务。

#### C.3.2□搜索寄养服务
- **接口名称**：搜索寄养服务
- **URL**：/api/v1/foster-services/search
- **请求方法**：GET
- **请求参数**：
  - keyword：关键词（可选）
  - petType：宠物类型（可选）
  - minPrice：最低价格（可选）
  - maxPrice：最高价格（可选）
  - latitude：纬度（可选，用于地理位置搜索）
  - longitude：经度（可选，用于地理位置搜索）
  - radius：搜索半径（可选，单位：公里）
  - page：页码（可选，默认为1）
  - size：每页数量（可选，默认为10）
  - sortBy：排序字段（可选，如pricePerDay、distance、averageRating等）
  - sortOrder：排序顺序（可选，ASC/DESC）
- **响应参数**：
  ```json
  {
    "code": "integer",
    "message": "string",
    "data": {
      "content": [
        {
          "id": "long",
          "title": "string",
          "description": "string",
          "pricePerDay": "decimal",
          "address": "string",
          "latitude": "decimal",
          "longitude": "decimal",
          "distance": "decimal",
          "averageRating": "decimal",
          "reviewCount": "integer",
          "provider": {
            "id": "long",
            "nickname": "string",
            "avatarUrl": "string"
          },
          "createdAt": "datetime",
          "updatedAt": "datetime"
        }
      ],
      "totalPages": "integer",
      "totalElements": "long",
      "size": "integer",
      "number": "integer"
    }
  }
  ```
- **描述**：搜索寄养服务接口，用于用户搜索符合条件的寄养服务。

### C.4□订单管理接口

#### C.4.1□创建订单
- **接口名称**：创建订单
- **URL**：/api/v1/bookings
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "serviceId": "long",
    "petId": "long",
    "startDate": "date",
    "endDate": "date",
    "notes": "string"
  }
  ```
- **响应参数**：
  ```json
  {
    "code": "integer",
    "message": "string",
    "data": {
      "id": "long",
      "serviceId": "long",
      "petId": "long",
      "startDate": "date",
      "endDate": "date",
      "totalAmount": "decimal",
      "status": "string",
      "createdAt": "datetime"
    }
  }
  ```
- **描述**：创建订单接口，用于宠物主人创建寄养订单。

#### C.4.2□支付订单
- **接口名称**：支付订单
- **URL**：/api/v1/bookings/{bookingId}/pay
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "paymentMethod": "WECHAT/ALIPAY/CREDIT_CARD"
  }
  ```
- **响应参数**：
  ```json
  {
    "code": "integer",
    "message": "string",
    "data": {
      "bookingId": "long",
      "paymentId": "long",
      "amount": "decimal",
      "paymentMethod": "string",
      "transactionId": "string",
      "status": "string",
      "paymentUrl": "string",
      "createdAt": "datetime"
    }
  }
  ```
- **描述**：支付订单接口，用于宠物主人支付寄养订单。

### C.5□消息管理接口

#### C.5.1□发送消息
- **接口名称**：发送消息
- **URL**：/api/v1/messages
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "receiverId": "long",
    "bookingId": "long",
    "content": "string"
  }
  ```
- **响应参数**：
  ```json
  {
    "code": "integer",
    "message": "string",
    "data": {
      "id": "long",
      "senderId": "long",
      "receiverId": "long",
      "bookingId": "long",
      "content": "string",
      "isRead": "boolean",
      "createdAt": "datetime"
    }
  }
  ```
- **描述**：发送消息接口，用于用户发送消息给其他用户。

#### C.5.2□获取消息列表
- **接口名称**：获取消息列表
- **URL**：/api/v1/messages
- **请求方法**：GET
- **请求参数**：
  - senderId：发送者ID（可选）
  - receiverId：接收者ID（可选）
  - bookingId：订单ID（可选）
  - isRead：是否已读（可选）
  - page：页码（可选，默认为1）
  - size：每页数量（可选，默认为20）
- **响应参数**：
  ```json
  {
    "code": "integer",
    "message": "string",
    "data": {
      "content": [
        {
          "id": "long",
          "senderId": "long",
          "receiverId": "long",
          "bookingId": "long",
          "content": "string",
          "isRead": "boolean",
          "createdAt": "datetime",
          "sender": {
            "id": "long",
            "nickname": "string",
            "avatarUrl": "string"
          },
          "receiver": {
            "id": "long",
            "nickname": "string",
            "avatarUrl": "string"
          }
        }
      ],
      "totalPages": "integer",
      "totalElements": "long",
      "size": "integer",
      "number": "integer"
    }
  }
  ```
- **描述**：获取消息列表接口，用于用户获取消息列表。

## 附录D□系统配置文件示例

本节提供PetFosterHub宠物寄养平台的主要配置文件示例，包括应用配置、数据库配置、缓存配置等。

### D.1□application.yml配置文件示例

```yaml
server:
  port: 8080
  servlet:
    context-path: /pet-foster-hub

spring:
  profiles:
    active: dev
  application:
    name: pet-foster-hub
  datasource:
    url: jdbc:mysql://localhost:3306/pet_foster_hub?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai
    username: root
    password: password
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
  data:
    redis:
      host: localhost
      port: 6379
      password: password
      database: 0
      timeout: 6000
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
    virtual-host: /
  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher

# 日志配置
logging:
  level:
    root: INFO
    com.example.petfosterhub: DEBUG
  config: classpath:log4j2.xml

# JWT配置
jwt:
  secret: your-secret-key
  expiration: 86400000 # 24小时
  token-header: Authorization
  token-prefix: Bearer

# 文件上传配置
file:
  upload-dir: /data/uploads
  max-size: 10485760 # 10MB

# Elasticsearch配置
elasticsearch:
  host: localhost
  port: 9200
  username: elastic
  password: password

# 地图服务配置
map:
  api-key: your-map-api-key
```

### D.2□log4j2.xml配置文件示例

```xml
<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="INFO">
    <Appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
        </Console>
        <RollingFile name="RollingFile" fileName="logs/pet-foster-hub.log" 
                     filePattern="logs/pet-foster-hub-%d{yyyy-MM-dd}-%i.log.gz">
            <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="true"/>
                <SizeBasedTriggeringPolicy size="10 MB"/>
            </Policies>
            <DefaultRolloverStrategy max="10"/>
        </RollingFile>
    </Appenders>
    <Loggers>
        <Root level="INFO">
            <AppenderRef ref="Console"/>
            <AppenderRef ref="RollingFile"/>
        </Root>
        <Logger name="com.example.petfosterhub" level="DEBUG" additivity="false">
            <AppenderRef ref="Console"/>
            <AppenderRef ref="RollingFile"/>
        </Logger>
    </Loggers>
</Configuration>
```

## 附录E□系统部署架构图

本节提供PetFosterHub宠物寄养平台的系统部署架构图，展示了系统的整体部署结构和各个组件之间的关系。

[系统部署架构图说明：系统采用微服务架构，部署在Kubernetes集群上，包括API网关、用户服务、宠物服务、寄养服务、订单服务、消息服务、支付服务、评价服务等多个微服务。每个微服务都有多个实例，通过负载均衡进行访问。数据层包括MySQL数据库、Redis缓存、Elasticsearch搜索引擎和RabbitMQ消息队列。前端应用部署在Nginx服务器上，通过CDN加速静态资源的访问。系统还包括监控系统、日志系统和CI/CD系统，用于系统的运维和管理。]

## 附录F□系统开发与实施计划

本节提供PetFosterHub宠物寄养平台的系统开发与实施计划，包括项目的阶段划分、时间安排、任务分配和里程碑等。

### F.1□项目阶段划分

PetFosterHub宠物寄养平台项目的实施周期为6个月，分为以下几个阶段：

1. 需求分析阶段（第1-2周）：完成需求调研、需求分析和需求规格说明书的编写。

2. 系统设计阶段（第3-4周）：完成系统架构设计、数据库设计、接口设计和界面设计，编写系统设计说明书。

3. 系统开发阶段（第5-16周）：完成后端服务的开发、前端界面的开发、数据库的设计和实现，进行单元测试和集成测试。

4. 系统测试阶段（第17-19周）：完成系统的功能测试、性能测试、安全测试、用户界面测试和兼容性测试，编写测试报告。

5. 系统部署阶段（第20周）：完成系统的部署和上线，包括服务器环境的搭建、应用程序的部署、数据库的初始化等。

6. 项目验收阶段（第21-24周）：进行项目验收，编写项目总结报告和用户手册，进行用户培训和系统运维支持。

### F.2□任务分配

项目团队成员及任务分配如下：

| 成员角色 | 姓名 | 主要职责 |
|----------|------|----------|
| 项目经理 | 张三 | 负责项目的整体规划、进度管理、团队协调和沟通。 |
| 需求分析师 | 李四 | 负责需求调研、需求分析和需求规格说明书的编写。 |
| 系统架构师 | 王五 | 负责系统架构设计、技术选型和系统设计说明书的编写。 |
| 后端开发工程师 | 赵六 | 负责后端服务的开发、单元测试和集成测试。 |
| 后端开发工程师 | 钱七 | 负责后端服务的开发、单元测试和集成测试。 |
| 前端开发工程师 | 孙八 | 负责前端界面的开发、用户界面测试和兼容性测试。 |
| 测试工程师 | 周九 | 负责系统的功能测试、性能测试、安全测试和测试报告的编写。 |
| 运维工程师 | 吴十 | 负责系统的部署、上线、监控和运维支持。 |

### F.3□里程碑

项目的主要里程碑如下：

1. 需求规格说明书评审通过（第2周）

2. 系统设计说明书评审通过（第4周）

3. 后端服务开发完成（第12周）

4. 前端界面开发完成（第16周）

5. 系统测试完成（第19周）

6. 系统上线（第20周）

7. 项目验收通过（第24周）